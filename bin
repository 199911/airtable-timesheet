#!/usr/bin/env node

const program = require('commander');
const timesheet = require('./timesheet');
const tag = require('./tag');

program
    .version('0.1.0')
    .command('list');

program
    .version('0.1.0')
    .command('start <difficulty> <mood> [tokens...]')
    .description('run the given remote command')
    .action((difficulty, mood, tokens) => {
        const description = tokens.join(' ');
        timesheet.endAsync()
            .then(() => {
                // Normalize the tag
                return timesheet.startAsync(tag.normalize('Difficulty', difficulty), tag.normalize('Mood', mood), description);
            })
            .catch((err) => {
                console.error(err);
            });
    })

program
    .version('0.1.0')
    .command('end')
    .action(() => {
        timesheet.endAsync()
            .catch((err) => {
                console.error(err);
            });
    });

program
    .parse(process.argv);
